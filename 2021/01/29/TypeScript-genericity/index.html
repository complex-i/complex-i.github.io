<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>TypeScript-genericity | Sibyl</title><script src="https://cdn.bootcss.com/valine/1.4.4/Valine.min.js"></script><link rel="stylesheet" href="/css/arknights.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/styles/atom-one-dark-reasonable.min.css"><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><meta name="generator" content="Hexo 5.3.0"></head><body><header><nav><a href="/">Home</a><a href="/archives/">Archives</a></nav></header><main><article><div id="post-bg"><div id="post-title"><div id="post-info"><span>date:<time datetime="2021-01-28T17:23:50.000Z" id="date"> 2021-01-29</time></span><br><span>updated:<time datetime="2021-01-28T17:46:19.172Z" id="updated"> 2021-01-29</time></span></div><h1>TypeScript-genericity</h1><hr></div><div id="post-content"><h2 id="TypeScript泛型简介"><a href="#TypeScript泛型简介" class="headerlink" title="TypeScript泛型简介"></a>TypeScript泛型简介</h2><p>泛型是程序设计语言的一种特性。<br>允许程序员在强类型程序设计语言中编写代码时定义一些可变部分，那些部分在使用前必须作出指明。<br>各种程序设计语言和其编译器、运行环境对泛型的支持均不一样，将类型参数化以达到代码复用提高软件开发工作效率的一种数据类型。<br>泛型类是引用类型，是堆对象，主要是引入了类型参数这个概念。</p>
<h3 id="泛型实例"><a href="#泛型实例" class="headerlink" title="泛型实例"></a>泛型实例</h3><p>让我们先来创建一个简单的泛型函数：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> r&lt;T&gt;(grade: T): T &#123;<br>  <span class="hljs-built_in">return</span> grade;<br>&#125;<br>r(<span class="hljs-string">&quot;icepy&quot;</span>);<br>r(100)<br>r(<span class="hljs-literal">true</span>)<br></code></pre></td></tr></table></figure>
<p>当我们并不知道返回类型时，泛型函数就解决了这样的问题，虽然这看起来和 Any 非常的类似。由于我们定义的是泛型函数，因此它并不会丢失类型，反而会根据我们传入的参数类型而返回一个类型，这也意味着我们可以将它适用于多个类型。</p>
<p>为我们的 r 函数创建泛型类型</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">type</span> GenericsR = &lt;T&gt;(grade: T) =&gt; T;<br><br><span class="hljs-keyword">function</span> r&lt;T&gt;(grade: T): T &#123;<br>  <span class="hljs-built_in">return</span> grade;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>const _r: GenericsR = r;<br>创建类型，其实仅是从编程风格上来说更统一和方便使用。</p>
<h4 id="泛型类"><a href="#泛型类" class="headerlink" title="泛型类"></a>泛型类</h4><p>泛型类其实看上去和定义一个泛型函数很类似，如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">class GenericsClass&lt;T&gt;&#123;<br>  public add?: (x: T, y: T) =&gt; T;<br>&#125;<br><br>const cls = new GenericsClass&lt;number&gt;();<br>cls.add = (x: number, y: number): number =&gt; &#123;<br>  <span class="hljs-built_in">return</span> x + y;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>看起来仅仅是为了约束大家使用同一种类型而已。</p>
<h4 id="范例"><a href="#范例" class="headerlink" title="范例"></a>范例</h4><p>泛型为我们适用于多类型返回：<br>传入字符串时，返回一个字符串<br>传入数值时，返回一个数值</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> xr&lt;T&gt; (args: T, handler?: &lt;R&gt; (result: R) =&gt; void): void&#123;<br>  <span class="hljs-keyword">if</span> (handler &amp;&amp; typeof handler === <span class="hljs-string">&quot;function&quot;</span>) &#123;<br>    <span class="hljs-keyword">if</span> (typeof grade === <span class="hljs-string">&quot;number&quot;</span>) &#123;<br>      handler(grade + 1);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (typeof grade === <span class="hljs-string">&quot;string&quot;</span>) &#123;<br>      handler(`grade (<span class="hljs-variable">$&#123; grade &#125;</span>) (icepy)`);<br>    &#125;<br>  &#125;<br>&#125;<br><br>xr(<span class="hljs-string">&quot;hello&quot;</span>, &lt;R&gt; (result: R) =&gt; &#123;<br>  console.log(result);<br>&#125;);<br></code></pre></td></tr></table></figure><div id="paginator"></div></div><div id="post-footer"><hr><a href="/2021/01/28/JSprototype/">JSprototype Next →</a><hr></div><div id="bottom-btn"><a id="to-index" href="#post-index" title="index">≡</a><a id="to-top" href="#post-title" title="to top">∧</a></div><div id="Valine"></div><script>new Valine({
 el: '#Valine'
 , appId: ''
 , appKey: ''
 , placeholder: '此条评论委托企鹅物流发送'
})</script></div></article><aside><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a href="/">Complex</a></h1><section id="total"><a id="total-archives" href="/archives"><span class="total-title">Archives Total:</span><span class="total-number">2</span></a><div id="total-tags"><span class="total-title">Tags:</span><span class="total-number">2</span></div><div id="total-categories"><span class="total-title">Categories:</span><span class="total-number">2</span></div></section></div><div id="aside-block"><h1>INDEX</h1><div id="post-index"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#TypeScript%E6%B3%9B%E5%9E%8B%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">TypeScript泛型简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B%E5%AE%9E%E4%BE%8B"><span class="toc-number">1.1.</span> <span class="toc-text">泛型实例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B%E7%B1%BB"><span class="toc-number">1.1.1.</span> <span class="toc-text">泛型类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8C%83%E4%BE%8B"><span class="toc-number">1.1.2.</span> <span class="toc-text">范例</span></a></li></ol></li></ol></li></ol></div></div><footer><nobr><span class="text-title">©</span><span class="text-content">2021</span></nobr><wbr><wbr><nobr>published with&nbsp;<a href="javascript:;">Sibyl&nbsp;</a></nobr><wbr><nobr>by&nbsp;<a href="javascript:;">Complex</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas><script src="/js/arknights.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script></body></html>